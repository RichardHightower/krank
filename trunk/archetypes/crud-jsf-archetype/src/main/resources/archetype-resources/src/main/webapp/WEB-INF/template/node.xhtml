<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
    xmlns:crank="http://www.googlecode.com/crank">
    
<ui:composition>

	<c:if test="${empty nodeColumnClasses}">
		<c:set var="nodeColumnClasses" value="imageTopCenter,panelColumnLeft" />
	</c:if>

	<h:panelGrid columns="2" columnClasses="${nodeColumnClasses}">
	
		<!-- NODE EXPAND / CONTRACT INDICATOR -->
		<a4j:form id="toggleForm${id}" >
			<crank:commandLink 
				id="expand${id}"
				entity="${entity}"
				action="${expandAction}"
				toolTipText="${expandToolTip}"
				rendered="${expandRendered}" 
				reRender="node${id},toggleForm${id}"  >
				<h:graphicImage value="/images/add-new.gif" border="0"/>
				<a4j:ajaxListener type="org.ajax4jsf.ajax.ForceRender"/>
			</crank:commandLink>
			<crank:commandLink 
				id="close${id}"
				entity="${entity}"
				action="${closeAction}"
				toolTipText="${closeToolTip}"
				rendered="#{closeRendered}" 
				reRender="node${nodeId},toggleForm${id}"  >
				<h:graphicImage value="/images/fold.gif" border="0"/>
				<a4j:ajaxListener type="org.ajax4jsf.ajax.ForceRender"/>
			</crank:commandLink>
		</a4j:form>
		
		<!-- NODE CONTENT -->
		<a4j:outputPanel id="node${id}">
			<ui:insert/>
		</a4j:outputPanel>

	</h:panelGrid>
	
</ui:composition>
</html>
