<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	  xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      xmlns:t="http://myfaces.apache.org/tomahawk"
	  xmlns:crank="http://www.googlecode.com/crank">

<ui:composition>

	<!-- DEFINE VARIABLES -->
	<c:if test="${empty label}">
	    <c:set var="label" value="${crank:createLabel(fieldName)}" />
	</c:if>
	
	<c:if test="${empty reRender}">
	    <c:set var="reRender" value="listingPanel" />
	</c:if>
	<c:if test="${idBase}">
		<c:set var="idBase" value="${paginator.name}_${fieldName}Header"/>
	</c:if>

	<c:set var="filter" value="${paginator.filterableProperties[fieldName]}"/>
	<c:set var="orderBy" value="${filter.orderBy}"/>
	<c:set var="comparison" value="${filter.comparison}"/>

	<!--  Style classes -->
	<c:if test="${empty headerLinkClass}">
	    <c:set var="headerLinkClass" value="linkClass" />
	</c:if>
	<c:if test="${empty headerTextClass}">
	    <c:set var="headerTextClass" value="textClass" />
	</c:if>
	<c:if test="${empty headerFilterInputTextClass}">
	    <c:set var="headerFilterInputTextClass" value="inputTextClass" />
	</c:if>
	<c:if test="${empty columnHeaderClass}">
	    <c:set var="columnHeaderClass" value="dataTableColumnHeader" />
	</c:if>

	<!-- END DEFINE VARIABLES -->

	<h:column id="${idBase}Column" styleClass="${columnHeaderClass}">
	
		<a4j:outputPanel id="${idBase}AjaxOutputPanel" axajRendered="true">
		
				<a4j:commandLink 
					id="${idBase}SortDesc"
					styleClass="${headerLinkClass}"
					reRender="${reRender}"
					rendered="#{orderBy.asc and paginator.sorting}"
					onmouseout="popUp(event,'sortImgAsc')" onmouseover="popUp(event,'sortImgAsc')"
					action="#{orderBy.toggle}">
					<h:graphicImage id="${idBase}SortDescGraphic" value="/images/sortdesc.gif" border="0" />
				</a4j:commandLink>
				
				<a4j:commandLink 
				    id="${idBase}SortAsc"
					styleClass="${headerLinkClass}"
				    reRender="${reRender}"
					rendered="#{orderBy.desc and paginator.sorting}"
					onmouseout="popUp(event,'sortImgDesc')" onmouseover="popUp(event,'sortImgDesc')"
					action="#{orderBy.toggle}">
					<h:graphicImage id="${idBase}SortAscGraphic" value="/images/sortasc.gif" border="0"/>
				</a4j:commandLink>
				
				<rich:spacer id="${idBase}Spacer1" width="10" height="10"/>

				<a4j:commandLink id="${idBase}OrderBy" styleClass="${headerLinkClass}" 
				    value="${label}" reRender="${reRender}"
					onmouseout="popUp(event,'sortToggle')" onmouseover="popUp(event,'sortToggle')"
					action="#{orderBy.toggle}"/>

				<rich:spacer id="${idBase}Spacer2" width="15" height="10"/>

				<a4j:commandLink  id="${idBase}EnableComparison"
				                  reRender="${reRender}"
								  action="#{comparison.enable}"
								  rendered="#{not comparison.enabled}"
								  onmouseout="popUp(event,'filterOn')" onmouseover="popUp(event,'filterOn')"
							      styleClass="${headerLinkClass}"								  
								  >
					<h:graphicImage id="${idBase}EnableComparisonGraphic" value="/images/filterOn.gif" border="0"/>
				</a4j:commandLink>
				

				<a4j:outputPanel id="${idBase}TextBooleanComparisonPanel" 
				                 axajRendered="true" 
				                 rendered="#{comparison.enabled and not crank:isDate(paginator.type,fieldName)}">
					<a4j:outputPanel id="${idBase}TextComparisonPanel"  rendered="${crank:isText(paginator.type,fieldName)}">
						<h:inputText id="${idBase}TextComparisonInputText" 		styleClass="${headerFilterInputTextClass}" 
											value="#{comparison.value}"
											size="5"/>
					</a4j:outputPanel>

					<a4j:outputPanel id="${idBase}BooleanComparisonPanel"  rendered="${crank:isBoolean(paginator.type,fieldName)}">
						<h:selectBooleanCheckbox  id="${idBase}BooleanComparisonInputCheckbox" 	styleClass="${headerFilterInputTextClass}" 
											value="#{comparison.value}"
											/>
					</a4j:outputPanel>

					<a4j:commandLink  id="${idBase}FilterOff1" reRender="${reRender}"
									  action="#{comparison.disable}"
 									  onmouseout="popUp(event,'filterOff1')" onmouseover="popUp(event,'filterOff1')"
									  styleClass="${headerLinkClass}"								  
									  >
						<h:graphicImage id="${idBase}FilterOff1Graphic" value="/images/filterOff.gif" border="0"/>
					</a4j:commandLink>
				</a4j:outputPanel>
				
				<a4j:outputPanel id="${idBase}DateComparisonPanel" axajRendered="true" rendered="${comparison.enabled and crank:isDate(paginator.type,fieldName)}">
					<br />
					<h:panelGrid id="${idBase}DateComparisonPanelGrid"  columns="3">
					
						<h:outputText id="${idBase}Text1" value=""/>
				        <t:calendar id="${idBase}CalenderInput"  renderAsPopup="true" renderPopupButtonAsImage="true" 
				        			size="8"
				                    value="#{comparison.value}">
				        </t:calendar>
						<h:outputText id="${idBase}Text2" value=""/>
						<h:outputText id="${idBase}Text3" value="thru" styleClass="headerTextClass"/>
					    <t:calendar id="${idBase}CalenderInput2" renderAsPopup="true" renderPopupButtonAsImage="true" 
				        			size="8"
					                    value="${comparison.value2}">
					    </t:calendar>
						<a4j:commandLink  
										  id="${idBase}FilterOff2"
										  reRender="${reRender}"
										  action="#{comparison.disable}"
	 									  onmouseout="popUp(event,'filterOff2')" onmouseover="popUp(event,'filterOff2')"
										  styleClass="${headerLinkClass}"								  
										  >
							<h:graphicImage id="${idBase}FilterOff2Graphic" value="/images/filterOff.gif" border="0"/>
						</a4j:commandLink>
				    </h:panelGrid>					
	
				</a4j:outputPanel>


		</a4j:outputPanel>
	</h:column>

</ui:composition>
</html>
