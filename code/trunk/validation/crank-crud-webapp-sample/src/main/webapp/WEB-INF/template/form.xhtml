<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
	  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:t="http://myfaces.apache.org/tomahawk"
	  xmlns:crank="http://www.googlecode.com/crank"
	  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	  xmlns:validation="http://code.google.com/p/krank/validation"	  
	  >

  <ui:composition>
  	
  	<c:if test="${empty ajax}">
  		<c:set var="ajax" value="false"/>
  	</c:if>

  	<c:if test="${empty formButtonClass}">
  		<c:set var="formButtonClass" value="paginationGroupButton"/>
  	</c:if>
  	
  	<c:if test="${empty rendered}">
  		<c:set var="rendered" value="true"/>
  	</c:if>
  	
	<c:set var="pNames"
			value="${fn:split(propertyNames, ',')}" />

	<h:panelGrid id="${crud.name}FormPanelGridId" 
				 columns="1" rendered="${rendered}">
	    <h:panelGrid id="${crud.name}FieldsFormPanelGridId" 
	    			columns="3" rowClasses="formRowClass1, formRowClass2">
			<c:forEach items="${pNames}" var="property">
				<crank:field entity="${crud.entity}" crud="${crud}" fieldName="${property}"/>
			</c:forEach>			
	    </h:panelGrid>
	    <ui:insert/>
	    <h:panelGroup id="${crud.name}FormPanelGroupForCommandButtons" rendered="${not ajax}">	  
			<h:commandButton 
				id="${crud.name}AddCommandButton"
				rendered="${crud.state=='ADD'}"
				styleClass="${formButtonClass}" 
				value="Create" 
				action="${crud.create}"/>			
			<h:commandButton 
				id="${crud.name}EditCommandButton"
				rendered="${crud.state=='EDIT'}" 
				styleClass="${formButtonClass}" 
				value="Update" 
				action="${crud.update}"/>			
			<h:commandButton 
				id="${crud.name}ResetCommandButton"
				value="Reset"
				styleClass="${formButtonClass}" 
				type="reset"/>
			<h:commandButton 
				id="${crud.name}CancelCommandButton"
				value="Cancel"
				styleClass="${formButtonClass}" 
				type="button"
				immediate="true" 
				action="${crud.cancel}"/>
		</h:panelGroup>
	    <h:panelGroup id="${crud.name}FormPanelGroupForCommandButtonsAjax" rendered="${ajax}">	  
			<a4j:commandButton 
				id="${crud.name}AddCommandButtonAjax"
				rendered="${crud.state=='ADD'}"
				styleClass="${formButtonClass}" 
				value="Create" 
				action="${crud.create}"/>			
			<a4j:commandButton 
				id="${crud.name}EditCommandButtonAjax"
				rendered="${crud.state=='EDIT'}" 
				styleClass="${formButtonClass}" 
				value="Update" 
				action="${crud.update}"/>			
			<a4j:commandButton 
				id="${crud.name}ResetCommandButtonAjax"
				value="Reset"
				styleClass="${formButtonClass}" 
				type="reset"/>
			<a4j:commandButton 
				id="${crud.name}CancelCommandButtonAjax"
				value="Cancel"
				styleClass="${formButtonClass}" 
				type="button"
				immediate="true" 
				action="${crud.cancel}"/>
		</h:panelGroup>

	</h:panelGrid>
    <br />
	
	
    <br />

</ui:composition>

</html>

