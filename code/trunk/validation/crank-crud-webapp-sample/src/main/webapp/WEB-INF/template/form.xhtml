<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:c="http://java.sun.com/jstl/core"
	  xmlns:fn="http://java.sun.com/jsp/jstl/functions"   
      xmlns:t="http://myfaces.apache.org/tomahawk"
	  xmlns:crank="http://www.googlecode.com/crank"
	  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"	  
	  >

  <ui:composition>
  	
  	<c:if test="${empty ajax}">
  		<c:set var="ajax" value="false"/>
  	</c:if>

  	<c:if test="${empty formButtonClass}">
  		<c:set var="formButtonClass" value="paginationGroupButton"/>
  	</c:if>
  	
  	<c:if test="${empty rendered}">
  		<c:set var="rendered" value="true"/>
  	</c:if>
  	
	<c:set var="pNames"
			value="${fn:split(propertyNames, ',')}" />

	<h:panelGrid columns="1" rendered="${rendered}">
	    <h:panelGrid columns="3" rowClasses="formRowClass1, formRowClass2">
			<c:forEach items="${pNames}" var="property">
				<crank:field entity="${crud.entity}" crud="${crud}" fieldName="${property}"/>
			</c:forEach>			
	    </h:panelGrid>
	    <ui:insert/>
	    <h:panelGroup rendered="${not ajax}">	  
			<h:commandButton 
				rendered="${crud.state=='ADD'}"
				styleClass="${formButtonClass}" 
				value="Create" 
				action="${crud.create}"/>			
			<h:commandButton 
				rendered="${crud.state=='EDIT'}" 
				styleClass="${formButtonClass}" 
				value="Update" 
				action="${crud.update}"/>			
			<h:commandButton 
				value="Reset"
				styleClass="${formButtonClass}" 
				type="reset"/>
			<h:commandButton 
				value="Cancel"
				styleClass="${formButtonClass}" 
				type="button"
				immediate="true" 
				action="${crud.update}"/>
		</h:panelGroup>
	    <h:panelGroup rendered="${ajax}">	  
			<a4j:commandButton 
				rendered="${crud.state=='ADD'}"
				styleClass="${formButtonClass}" 
				value="Create" 
				action="${crud.create}"/>			
			<a4j:commandButton 
				rendered="${crud.state=='EDIT'}" 
				styleClass="${formButtonClass}" 
				value="Update" 
				action="${crud.update}"/>			
			<a4j:commandButton 
				value="Reset"
				styleClass="${formButtonClass}" 
				type="reset"/>
			<a4j:commandButton 
				value="Cancel"
				styleClass="${formButtonClass}" 
				type="button"
				immediate="true" 
				action="${crud.update}"/>
		</h:panelGroup>

	</h:panelGrid>

</ui:composition>

</html>

